<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Title of the site is set in SESSION from the database.php -->
    <title>Theta | Login</title>

    <!-- Bootstrap 5 Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />

    <!-- Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />

    <!-- Bootstrap 5 JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>

    <!-- Meta tags for responsiveness -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Link the local CSS to the webpage -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/stylesheet.css') }}"
    />
  </head>
  <style>
    body.bg-secondary {
      background-color: #6c757d;
    }

    /* Style for text fields */
    .form-control.text-light.bg-dark {
      color: #f8f9fa; /* Text color */
      background-color: #343a40; /* Background color */
      border: 1px solid #495057; /* Border color */
      padding: 0.75rem; /* Padding inside the text field */
      border-radius: 0.25rem; /* Rounded corners */
    }

    /* Style for the labels */
    .form-label {
      color: #f8f9fa; /* Text color */
    }

    /* Style for the button */
    .btn.btn-secondary {
      background-color: #6c757d; /* Button background color */
      border-color: #6c757d; /* Button border color */
    }

    .btn.btn-secondary:hover {
      background-color: #5a6268; /* Button background color on hover */
      border-color: #5a6268; /* Button border color on hover */
    }
  </style>

  <body class="d-grid gap-5 bg-secondary">
    <!-- This is the container of the form  -->
    <div
      class="container p-3 mb-2 bg-normal-92 text-white w-md-25 rounded-3 mt-5"
    >
      <h1 class="text-center mb-2 opacity-1">Login</h1>
      <form
        class="needs-validation"
        action="{{ url_for('login') }}"
        method="post"
      >
        <div class="row justify-content-center mb-3">
          <div class="col-10 col-md-8">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              class="form-control text-light bg-dark"
              name="email"
              placeholder="Enter Email"
              required
            />
          </div>
        </div>
        <div class="row justify-content-center mb-3">
          <div class="col-10 col-md-8">
            <label for="password" class="form-label">Password</label>
            <input
              type="password"
              class="form-control text-light bg-dark"
              name="password"
              placeholder="Enter Password"
              required
            />
          </div>
        </div>
        <div class="row justify-content-center mb-3">
          <div class="col-6 col-md-4 text-center">
            <button
              type="submit"
              name="login"
              class="btn btn-secondary mb-3 rounded-pill shadow-lg"
              style="width: 100px"
            >
              Login
            </button>
            <p class="m-0">No Account? <a href="dashboard.html">Register</a></p>
          </div>
        </div>
      </form>
    </div>

    <!-- Error Modal -->
    <div
      class="modal fade"
      id="errorModal"
      tabindex="-1"
      aria-labelledby="errorModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="errorModalLabel">Error</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p id="error-message"></p>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript to trigger the modal with error message -->
    <script>
      {% with errors = get_flashed_messages(category_filter=["error"]) %}
      {% if error %}
          document.addEventListener('DOMContentLoaded', function() {
              var myModal = new bootstrap.Modal(document.getElementById('errorModal'), {
                  backdrop: 'static',
                  keyboard: false
              });
              document.getElementById('error-message').innerText = "{{ error }}";
              myModal.show();
          });
      {% endif %}
      {% endwith %}
    </script>
  </body>
</html>
